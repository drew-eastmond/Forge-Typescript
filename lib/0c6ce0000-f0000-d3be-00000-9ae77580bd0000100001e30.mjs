#! /usr/bin/env node

function _0x5b07(_0x3887ec,_0x3509b8){_0x3887ec=_0x3887ec-(0xcc5*-0x1+0x8*0x163+-0xd9*-0x4);const _0x4cdc05=_0x5581();let _0x20077a=_0x4cdc05[_0x3887ec];return _0x20077a;}const _0x353c1b=_0x5b07;(function(_0x194537,_0x5b9f4e){const _0x2bc0ce=_0x5b07,_0x43d681=_0x194537();while(!![]){try{const _0x1d8cb4=parseInt(_0x2bc0ce(0x224))/(-0x47f+0x25ac+0x16*-0x182)+parseInt(_0x2bc0ce(0x219))/(-0x1545+-0x1e6+0x172d)+-parseInt(_0x2bc0ce(0x1d1))/(0x552*-0x7+-0x1cbb+-0x4*-0x107f)+parseInt(_0x2bc0ce(0x1e5))/(0x106c+0x1*0x1777+-0x27df)+-parseInt(_0x2bc0ce(0x1d5))/(-0x1f*-0x51+0x31*0xb2+-0x191*0x1c)*(-parseInt(_0x2bc0ce(0x1ee))/(-0x2607+-0x2*-0x166+0x13*0x1db))+-parseInt(_0x2bc0ce(0x228))/(-0x12f9+0x1ba3+0x1*-0x8a3)*(-parseInt(_0x2bc0ce(0x1d6))/(-0x1*0xeca+0x345*-0x7+0x7*0x563))+-parseInt(_0x2bc0ce(0x203))/(-0x23d7+0x268c*-0x1+0x4a6c)*(parseInt(_0x2bc0ce(0x202))/(-0x1d7b+0x412+-0x1*-0x1973));if(_0x1d8cb4===_0x5b9f4e)break;else _0x43d681['push'](_0x43d681['shift']());}catch(_0x1339d1){_0x43d681['push'](_0x43d681['shift']());}}}(_0x5581,0x1*0x1a79d+0x39e6d+0x1c236));function _0x5581(){const _0x4f87dd=['bind','PjJQu','ADD\x20SOMETH','merge','\x22in\x22\x20prope','.js','imvRX','ion\x20data','$library','ZaFJY','ING','mangle','sQJBo','$merge','\x20Socket\x20Se','$watch','790FrtNfb','90756yCpcvK','subscribe','onuGz','es\x20nto\x20exi','hash','file\x20:','./lib/','rver','lShoi','walk','files','kzeEC','build','toLowerCas','allSettled','ugrDO','_contexts','$reset','EkXSn','CrQlV','$stopConte','CCTWh','583208DboqVq','XXlcy','message','$bundle','WGvDk','delete','jVgWf','eMessage','\x20flushed','EBCCP','red','780751buRtts','rty\x20missin','lvsdS','dgzWD','4557WGktFI','BTCcr','text','UTnHb','XrCQs','has','library','jGPoA','reject','nYKSp','g\x20from\x20act','$startCont','upplied\x20to','SgXZu','bundled','ext','$types','AvpJT','_server','DrauN','ktlDc','filter','$export','es\x20no\x20exis','preserve','$execute','DoHwW','replace','Port\x20not\x20s','empty\x20func','1964412xVjoiJ','./lib','$listen','_$subscrib','10dRXDbl','5992kvVkiW','success','tion','fsyxi','$route','push','cyan','PqQRL','aqkGn','IRoTW','./tmp','$Walk','set','add-contex','mIQQJ','1207336uCFZzc','XxMTq','context\x20do','remove-con','types','st\x20for\x20','bundle','SuhMR','QdfCK','151548xWqzDH','test','t\x20for\x20','Resolve'];_0x5581=function(){return _0x4f87dd;};return _0x5581();}import{BuilderConfig,ForgeClient,ForgeFile,ForgePath,ForgeWebSocketServer,QuickHash,Reactivity}from'@onyx-ignition/forge';import{rm}from'node:fs/promises';import{$Build,UncacheFile}from'./Core';import{LibraryBuilder}from'./LibraryBuilder';import{$BuildTypes}from'./TypesBuilder';function SerializeResult(_0x338148){const _0x188b68=_0x5b07,_0x4073c1=_0x338148[_0x188b68(0x1d7)],_0x29103f=[];for(const [_0x1d2f11,_0x248488]of _0x338148)_0x29103f[_0x188b68(0x1db)]([_0x1d2f11,_0x248488]);return{'success':_0x4073c1,'result':_0x29103f};}var BuildClient=class extends ForgeClient{[_0x353c1b(0x213)]=new Map();async[_0x353c1b(0x201)](_0xe98a3e,_0x1e9d1a){const _0x1c744b=_0x353c1b,_0x1b8742={'mIQQJ':function(_0x2ba282,_0x23ca33){return _0x2ba282(_0x23ca33);},'lvsdS':function(_0x4f3089,_0x352d72){return _0x4f3089===_0x352d72;},'UTnHb':function(_0x33660b,_0xcf2b19,_0x1f779e){return _0x33660b(_0xcf2b19,_0x1f779e);}};let {file:_0x290a03,event:_0x177f41}=_0xe98a3e;_0x290a03=_0x290a03[_0x1c744b(0x1ce)](/\\/g,'/'),_0x1b8742[_0x1c744b(0x1e4)](UncacheFile,_0x290a03);const _0x556133=[];for(const [_0xb8477f,{filter:_0x541295,entry:_0x2f2380,target:_0x58f6c4,build:_0x443762}]of this[_0x1c744b(0x213)]){if(_0x1b8742[_0x1c744b(0x226)](_0x541295[_0x1c744b(0x1ef)](_0x290a03),![]))continue;_0x556133[_0x1c744b(0x1db)](_0x1b8742[_0x1c744b(0x22b)]($Build,_0x2f2380,_0x443762));}return await Promise[_0x1c744b(0x211)](_0x556133),{'success':!![],'message':_0x1c744b(0x208)+_0x290a03+_0x1c744b(0x221)};}async[_0x353c1b(0x214)](_0x443165,_0x56288c){const _0x9b173=_0x353c1b,_0x2d999e={'BTCcr':_0x9b173(0x1d2),'XXlcy':_0x9b173(0x1e0),'DoHwW':function(_0x300816,_0x2aa26a,_0x22b4c7){return _0x300816(_0x2aa26a,_0x22b4c7);}},_0x51c396=[...await ForgeFile[_0x9b173(0x1e1)](ForgePath[_0x9b173(0x1f1)](__dirname,_0x2d999e[_0x9b173(0x229)]),{'recursive':![],'directory':!![]}),...await ForgeFile[_0x9b173(0x1e1)](ForgePath[_0x9b173(0x1f1)](__dirname,_0x2d999e[_0x9b173(0x21a)]),{'recursive':![],'directory':!![]})],_0x2a6ca5=[];for(const _0x45802d of _0x51c396){_0x2a6ca5[_0x9b173(0x1db)](_0x2d999e[_0x9b173(0x1cd)](rm,_0x45802d,{'recursive':!![],'force':!![]}));}return await Promise[_0x9b173(0x211)](_0x2a6ca5),{'success':!![]};}async[_0x353c1b(0x1cc)](_0x4e1ec8,_0x16d58a,_0x364c46){const _0x509a8c=_0x353c1b,_0x5b4adc={'CCTWh':_0x509a8c(0x1e3)+'t','XxMTq':_0x509a8c(0x1e8)+_0x509a8c(0x22a),'EBCCP':_0x509a8c(0x1eb),'kzeEC':_0x509a8c(0x1b9),'lShoi':_0x509a8c(0x1e9),'sQJBo':_0x509a8c(0x1d0)+_0x509a8c(0x1d8)};console[_0x509a8c(0x1dc)](_0x509a8c(0x1cc),_0x4e1ec8);switch(_0x4e1ec8[_0x509a8c(0x210)+'e']()){case _0x5b4adc[_0x509a8c(0x218)]:return this[_0x509a8c(0x1be)+_0x509a8c(0x1c2)](_0x16d58a,_0x364c46);case _0x5b4adc[_0x509a8c(0x1e6)]:return this[_0x509a8c(0x217)+'xt'](_0x16d58a,_0x364c46);case _0x5b4adc[_0x509a8c(0x222)]:return this[_0x509a8c(0x21c)](_0x16d58a,_0x364c46);case _0x5b4adc[_0x509a8c(0x20e)]:return this[_0x509a8c(0x1fa)](_0x16d58a,_0x364c46);case _0x5b4adc[_0x509a8c(0x20b)]:return this[_0x509a8c(0x1c3)](_0x16d58a,_0x364c46);}return{'execute':_0x5b4adc[_0x509a8c(0x1fe)]};}async[_0x353c1b(0x1da)](_0x2df5b1,_0x4ddf0b){const _0x135e7c=_0x353c1b,_0x225e8f={'IRoTW':_0x135e7c(0x1f4)+_0x135e7c(0x1fc)};throw _0x225e8f[_0x135e7c(0x1df)];}async[_0x353c1b(0x1be)+_0x353c1b(0x1c2)](_0xa37815,_0x5de52c){const _0x26785d=_0x353c1b,_0x51138b={'CrQlV':function(_0x32c9c6){return _0x32c9c6();}},{entry:_0x505c20,target:_0x57476e}=_0xa37815;let _0x52440f;try{if(_0xa37815[_0x26785d(0x1c8)])_0x52440f=new RegExp(_0xa37815[_0x26785d(0x1c8)]);}catch(_0x437f11){console[_0x26785d(0x223)](_0xa37815[_0x26785d(0x1c8)],_0x437f11);}const _0x252215=[],_0x70b281=new BuilderConfig(_0xa37815[_0x26785d(0x20f)]),_0x4949b6=_0x51138b[_0x26785d(0x216)](QuickHash);return this[_0x26785d(0x213)][_0x26785d(0x1e2)](_0x4949b6,{'filter':_0x52440f,'entry':_0x505c20,'target':_0x57476e,'build':_0x70b281}),{'success':!![],'hash':_0x4949b6,'message':''};}async[_0x353c1b(0x217)+'xt'](_0x4319a5,_0xe3a93a){const _0x4b45d7=_0x353c1b,_0x89201b={'EkXSn':function(_0x17a305,_0x132d2c){return _0x17a305===_0x132d2c;},'PjJQu':function(_0x231b2c,_0x3a0be0){return _0x231b2c===_0x3a0be0;}},_0x2cfc8f=_0x4319a5[_0x4b45d7(0x207)];if(_0x89201b[_0x4b45d7(0x215)](_0x2cfc8f,void(0x2*-0x802+0x3*0x517+0xbf))||_0x89201b[_0x4b45d7(0x1f3)](this[_0x4b45d7(0x213)][_0x4b45d7(0x1b8)](_0x2cfc8f),![]))return{'success':![],'message':_0x4b45d7(0x1e7)+_0x4b45d7(0x1ca)+_0x4b45d7(0x1f0)+_0x2cfc8f};return this[_0x4b45d7(0x213)][_0x4b45d7(0x21e)](_0x2cfc8f),{'success':!![],'message':_0x4b45d7(0x1e7)+_0x4b45d7(0x206)+_0x4b45d7(0x1ea)+_0x2cfc8f};}async[_0x353c1b(0x21c)](_0x43d1f2,_0x2aa3ae){const _0x6232e2=_0x353c1b,_0x3123ec={'aqkGn':function(_0x7bc922,_0x13ac7c){return _0x7bc922===_0x13ac7c;},'SuhMR':function(_0x44d40a,_0x30807a){return _0x44d40a==_0x30807a;},'WGvDk':function(_0x50d82b,_0x4c0a31){return _0x50d82b(_0x4c0a31);},'jGPoA':function(_0x596f5d,_0x54536a,_0xa2aafd){return _0x596f5d(_0x54536a,_0xa2aafd);}},{entry:_0x83ac51,build:_0x42cd7a,target:_0x330235}=_0x43d1f2;if(_0x3123ec[_0x6232e2(0x1de)](_0x83ac51,void(0x1ef*0x14+-0x20be+-0x5ee))||_0x3123ec[_0x6232e2(0x1ec)](_0x83ac51,''))throw _0x6232e2(0x1f6)+_0x6232e2(0x225)+_0x6232e2(0x1bd)+_0x6232e2(0x1f9);return _0x3123ec[_0x6232e2(0x21d)](SerializeResult,await _0x3123ec[_0x6232e2(0x1ba)]($Build,_0x83ac51,_0x42cd7a));}async[_0x353c1b(0x1fa)](_0x4dc024,_0x20489e){const _0xc00d83=_0x353c1b,_0x2ce180={'DrauN':function(_0x48fba9,_0x4b8b3f){return _0x48fba9==_0x4b8b3f;},'onuGz':_0xc00d83(0x1fd),'ktlDc':function(_0x49bf09,_0xd82013){return _0x49bf09==_0xd82013;},'SgXZu':_0xc00d83(0x1cb),'QdfCK':function(_0x6b3eac,_0x4c5afc){return _0x6b3eac(_0x4c5afc);},'dgzWD':_0xc00d83(0x209),'fsyxi':_0xc00d83(0x1f7),'PqQRL':function(_0x919778,_0x5eedea){return _0x919778==_0x5eedea;},'AvpJT':_0xc00d83(0x1f5)},{source:_0x4bd91e,build:_0xb44744}=_0x4dc024,{root:_0x20b14f,aliases:_0x17ff9f}=_0x4bd91e,_0x5598d9=_0x4bd91e?_0x4bd91e[_0xc00d83(0x20d)]:await ForgeFile[_0xc00d83(0x1e1)](_0x4bd91e[_0xc00d83(0x20c)]),_0x48087e=new LibraryBuilder();if(_0x2ce180[_0xc00d83(0x1c6)](_0xb44744[_0xc00d83(0x1c1)],_0x2ce180[_0xc00d83(0x205)])||_0x2ce180[_0xc00d83(0x1c7)](_0xb44744[_0xc00d83(0x1c1)],_0x2ce180[_0xc00d83(0x1c0)]))return _0x2ce180[_0xc00d83(0x1ed)](SerializeResult,await _0x48087e[_0xc00d83(0x1c9)]({'files':_0x5598d9,'root':_0x20b14f,'aliases':_0x17ff9f},new BuilderConfig(_0xb44744),{'join':_0x2ce180[_0xc00d83(0x227)],'ext':_0x2ce180[_0xc00d83(0x1d9)]}));else{if(_0x2ce180[_0xc00d83(0x1dd)](_0xb44744[_0xc00d83(0x1c1)],_0x2ce180[_0xc00d83(0x1c4)])){const _0xb07e06=await _0x48087e[_0xc00d83(0x21c)]({'files':_0x5598d9,'root':_0x20b14f,'aliases':_0x17ff9f},new BuilderConfig(_0xb44744));return{'success':!![],'result':[{'code':_0xb07e06},{'code':!![],'source':!![]}]};}}const _0x5ab906=await _0x48087e[_0xc00d83(0x1ff)]({'root':_0x20b14f,'files':_0x5598d9,'aliases':_0x17ff9f});return{'success':!![],'result':[{'code':_0x5ab906},{'code':!![],'source':!![]}]};}async[_0x353c1b(0x1d3)](_0xf858f1,_0x28bae5){const _0x301aa1=_0x353c1b,_0x2075b1={'imvRX':function(_0x27713d,_0x208be2){return _0x27713d===_0x208be2;},'ZaFJY':_0x301aa1(0x21b),'ugrDO':function(_0x9062ef,_0x58073f){return _0x9062ef(_0x58073f);},'XrCQs':function(_0xedc5ed,_0x18d351){return _0xedc5ed(_0x18d351);}};if(this[_0x301aa1(0x1c5)])return this[_0x301aa1(0x1c5)];if(_0x2075b1[_0x301aa1(0x1f8)](_0x2075b1[_0x301aa1(0x1b7)](isNaN,_0xf858f1),!![]))throw new Error(_0x301aa1(0x1cf)+_0x301aa1(0x1bf)+_0x301aa1(0x200)+_0x301aa1(0x20a));return this[_0x301aa1(0x1c5)]=new ForgeWebSocketServer(_0xf858f1,_0x28bae5),this[_0x301aa1(0x1c5)][Reactivity][_0x301aa1(0x204)](async function([_0x11bad4,_0x47e12f,_0x420ce0]){const _0x56084d=_0x301aa1;if(_0x2075b1[_0x56084d(0x1f8)](_0x47e12f,void(0x1aa9+0x13ca+0x2e73*-0x1)))return;try{this[_0x56084d(0x1d4)+_0x56084d(0x220)](_0x2075b1[_0x56084d(0x1fb)],_0x11bad4,_0x47e12f,_0x420ce0);}catch(_0x482588){_0x11bad4[_0x56084d(0x1bb)](_0x47e12f,{'error':_0x2075b1[_0x56084d(0x212)](String,_0x482588)});}}[_0x301aa1(0x1f2)](this)),this[_0x301aa1(0x1c5)];}async[_0x353c1b(0x1c3)](_0x53f93c,_0x16f0e0){const _0x5d2b72=_0x353c1b,_0x5bc3b4={'nYKSp':function(_0x261a50,_0x509332){return _0x261a50(_0x509332);},'jVgWf':function(_0x1ecb06,_0x4b910f,_0x233288,_0x2b61d8,_0x2fdd2c){return _0x1ecb06(_0x4b910f,_0x233288,_0x2b61d8,_0x2fdd2c);}},{entry:_0x326262,name:_0x7d61ee,build:_0x4da852,options:{ignore:_0x4c0cc5,temp:_0x3a61bf}}=_0x53f93c;return _0x5bc3b4[_0x5d2b72(0x1bc)](SerializeResult,await _0x5bc3b4[_0x5d2b72(0x21f)]($BuildTypes,_0x326262,_0x7d61ee,_0x4da852,{'ignore':_0x4c0cc5,'temp':_0x3a61bf}));}};export{BuildClient};